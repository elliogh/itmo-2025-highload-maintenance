# Домашнее задание 4 (WEB. High Performance WEB и CDN)

Выполнил: Целиков Данил

## Содержание

1. [Задание 1. Создание Server Pool для backend ](#задание-1-создание-server-pool-для-backend)

2. [Задание 2. DNS Load Balancing с помощью dnsmasq](#задание-2-dns-load-balancing-с-помощью-dnsmasq)

3. [Задание 3. Балансировка Layer 4 с с помощью IPVS ](#задание-3-балансировка-layer-4-с-с-помощью-ipvs)

4. [Задание 4. Балансировка L7 с помощью NGINX](#задание-4-балансировка-l7-с-помощью-nginx)

## Задание 1. Создание Server Pool для backend

### Создайте у себя в home dir 2 папки ~/backend1 и ~/backend2, в каждой из которых должен лежать 1 index.html и запустить питоновый http сервер на портах 8081 и 8082

## Задание 2. DNS Load Balancing с помощью dnsmasq

### При помощи dnsmasq создайте 2 A записи my-awesome-highload-app.local,127.0.0.1 my-awesome-highload-app.local,127.0.0.2

### Запустите dnsmasq и при помощи dig обратитесь к 127.0.0.1 для резолва my-awesome-highload-app.local

### Проанализируйте вывод, что произойдет с DNS записями если backend2 сервер сломается?

## Задание 3. Балансировка Layer 4 с с помощью IPVS

### Создайте dummy1 интерфейс с адресом 192.168.100.1/32

### Используя ipvsadm создайте VS для TCP порта 80 ведущего в 127.0.0.1:8081 и 127.0.0.1:8082 использующего round-robin тип балансировки.

### Используя curl сходите в http://192.168.100.1 продемонстрируйте счетчики на ipvs, убедитесь, что балансировка происходит.

## Задание 4. Балансировка L7 с помощью NGINX

### Создайте пул из 127.0.0.1:8081 и 127.0.0.1:8082 в nginx с active-backup балансировкой.

### Убедитесь, что переключение на backup сервер происходит после 7 неудачных попыток сходить в активный сервер.